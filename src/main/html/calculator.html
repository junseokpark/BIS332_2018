<!doctype html>
<html>
<head>
    <title>BIS332 HTML Examplepage</title>
</head>

<script type="text/javascript">

    function callCalculatorAPI(form) {
        alert(form);
        // Hide input container
        document.getElementById("input").style.display("none");

        var xhttp = new XMLHttpRequest();

        // bind the formdata object and the form element
        var formdata = new FormData(document.getElementById('test-form'));

        xhttp.open("POST", "http://localhost:8080/restCalculatorResult", true);
        xhttp.setRequestHeader("Content-type", "application/json");

        xhttp.send(formdata);

        if (xhttp.status == 200) {
            console.log(xhttp.responseText);
        }

        var response = JSON.parse(xhttp.responseText);

        alert(response);

        // Show output container
        // (1) print results to output container
        document.getElementById("string").innerHTML = response.text;
        var tableContents = ""
        for (i=0; i < 10; i++) {
            tableContents += "<tr><td>"+ response.firstNo + "+" + response.secondNo + "=" + response.sum+  "</td></tr>";
        }
        document.getElementById("table").innerHTML = tableContents;
        // (2) show
        document.getElementById("output").style.display("block");

    }


</script>



<body>
<div id="input">
    <h1>Form</h1>
    <h2>Input two integers</h2>
    <form id='test-form' onsubmit="callCalculatorAPI(this)">
        <p>first Number: <input type="text" name="firstNo" /></p>
        <p>second Number: <input type="text" name="secondNo" /></p>
        <p>String : <input type="text" name="text"/></p>
        <p><input type="submit" value="Submit"  /> </p>
    </form>
</div>
<div id="output" style="display: none;">
    Your output string : <span id="string"></span>
    Calculator results <br>
    <table id="table">
    </table>
</div>


</body>
</html>